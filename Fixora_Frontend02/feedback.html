<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Fixora | Feedback & Rating</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: { 
                            dark: '#0f172a', 
                            primary: '#0066ff', 
                            'primary-dark': '#0052cc',
                            action: '#4f46e5',
                            'action-light': '#6366f1',
                            accent: '#06b6d4',
                            success: '#10b981',
                            warning: '#f59e0b',
                            surface: '#f8fafc',
                            'surface-alt': '#f1f5f9'
                        }
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-brand-surface min-h-screen pb-10">
    <header class="bg-white shadow-md p-4 flex items-center gap-4 sticky top-0 z-20">
        <a href="booking_history.html" class="w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center tap-effect hover-lift">
            <i class="fa-solid fa-arrow-left text-brand-dark"></i>
        </a>
        <h1 class="text-xl font-bold text-brand-dark">Rate Service (R-8)</h1>
    </header>

    <main class="p-6">
        <!-- Service Provider Info -->
        <div class="bg-white rounded-[24px] p-6 shadow-md mb-6 card-interactive">
            <div class="flex items-center gap-4">
                <img src="https://ui-avatars.com/api/?name=Mike+Ross&background=0f172a&color=fff" class="w-16 h-16 rounded-full shadow-md ring-2 ring-brand-action-light/20">
                <div>
                    <h3 class="text-xl font-bold text-brand-dark">Mike Ross</h3>
                    <p class="text-sm text-gray-500">AC Repair Service</p>
                    <p class="text-xs text-gray-400 mt-1">Booking #ORD-2991</p>
                </div>
            </div>
        </div>

        <!-- Rating Section -->
        <div class="bg-white rounded-[24px] p-6 shadow-md mb-6">
            <h2 class="text-lg font-bold text-brand-dark mb-4">Rate Your Experience</h2>
            
            <!-- Star Rating -->
            <div class="flex justify-center gap-2 mb-6" id="starRating">
                <button onclick="setRating(1)" class="star-btn w-12 h-12 text-3xl tap-effect hover:scale-110 transition-transform" data-rating="1">
                    <i class="fa-regular fa-star text-gray-300"></i>
                </button>
                <button onclick="setRating(2)" class="star-btn w-12 h-12 text-3xl tap-effect hover:scale-110 transition-transform" data-rating="2">
                    <i class="fa-regular fa-star text-gray-300"></i>
                </button>
                <button onclick="setRating(3)" class="star-btn w-12 h-12 text-3xl tap-effect hover:scale-110 transition-transform" data-rating="3">
                    <i class="fa-regular fa-star text-gray-300"></i>
                </button>
                <button onclick="setRating(4)" class="star-btn w-12 h-12 text-3xl tap-effect hover:scale-110 transition-transform" data-rating="4">
                    <i class="fa-regular fa-star text-gray-300"></i>
                </button>
                <button onclick="setRating(5)" class="star-btn w-12 h-12 text-3xl tap-effect hover:scale-110 transition-transform" data-rating="5">
                    <i class="fa-regular fa-star text-gray-300"></i>
                </button>
            </div>

            <p id="ratingText" class="text-center text-gray-400 font-semibold mb-6">Tap to rate (1-5)</p>

            <!-- Feedback Form -->
            <form id="feedbackForm" class="space-y-4">
                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-2">How was the service quality?</label>
                    <div class="flex gap-2 flex-wrap">
                        <button type="button" onclick="selectTag(this)" class="tag-btn px-4 py-2 bg-gray-100 text-gray-600 rounded-full text-sm font-semibold tap-effect hover:bg-brand-action-light hover:text-white transition-all">
                            Excellent
                        </button>
                        <button type="button" onclick="selectTag(this)" class="tag-btn px-4 py-2 bg-gray-100 text-gray-600 rounded-full text-sm font-semibold tap-effect hover:bg-brand-action-light hover:text-white transition-all">
                            Good
                        </button>
                        <button type="button" onclick="selectTag(this)" class="tag-btn px-4 py-2 bg-gray-100 text-gray-600 rounded-full text-sm font-semibold tap-effect hover:bg-brand-action-light hover:text-white transition-all">
                            Average
                        </button>
                        <button type="button" onclick="selectTag(this)" class="tag-btn px-4 py-2 bg-gray-100 text-gray-600 rounded-full text-sm font-semibold tap-effect hover:bg-brand-action-light hover:text-white transition-all">
                            Poor
                        </button>
                    </div>
                </div>

                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-2">Additional Feedback (Optional)</label>
                    <textarea id="feedbackText" rows="4" placeholder="Share your experience..." 
                        class="w-full input-field rounded-xl p-4 text-brand-dark font-medium resize-none"></textarea>
                </div>

                <div id="feedbackMessage" class="hidden p-3 rounded-xl text-sm font-semibold text-center"></div>

                <button type="submit" class="w-full bg-gradient-to-r from-brand-action via-brand-action-light to-brand-primary text-white py-4 rounded-xl font-bold shadow-lg shadow-brand-action/40 tap-effect hover-lift transition-all relative overflow-hidden">
                    <span class="relative z-10">Submit Feedback (R-8)</span>
                </button>
            </form>
        </div>

        <!-- Rating Guidelines -->
        <div class="bg-blue-50 border border-blue-100 rounded-xl p-4">
            <p class="text-xs text-blue-800 font-medium">
                <i class="fa-solid fa-info-circle mr-2"></i>
                Your feedback helps us improve our services. Ratings are stored in the database and displayed to other users.
            </p>
        </div>
    </main>

    <script>
        let selectedRating = 0;
        const ratingTexts = {
            1: 'Poor - Very Dissatisfied',
            2: 'Fair - Below Expectations',
            3: 'Good - Met Expectations',
            4: 'Very Good - Exceeded Expectations',
            5: 'Excellent - Outstanding Service!'
        };

        function setRating(rating) {
            selectedRating = rating;
            const stars = document.querySelectorAll('.star-btn');
            const ratingText = document.getElementById('ratingText');

            stars.forEach((star, index) => {
                const starIcon = star.querySelector('i');
                if (index < rating) {
                    starIcon.className = 'fa-solid fa-star text-amber-400';
                } else {
                    starIcon.className = 'fa-regular fa-star text-gray-300';
                }
            });

            ratingText.textContent = ratingTexts[rating];
            ratingText.className = 'text-center font-semibold mb-6 ' + 
                (rating >= 4 ? 'text-brand-success' : rating >= 3 ? 'text-brand-warning' : 'text-red-500');
        }

        function selectTag(button) {
            document.querySelectorAll('.tag-btn').forEach(btn => {
                btn.className = 'tag-btn px-4 py-2 bg-gray-100 text-gray-600 rounded-full text-sm font-semibold tap-effect hover:bg-brand-action-light hover:text-white transition-all';
            });
            button.className = 'tag-btn px-4 py-2 bg-gradient-to-r from-brand-action to-brand-primary text-white rounded-full text-sm font-semibold tap-effect shadow-md';
        }

        document.getElementById('feedbackForm').addEventListener('submit', function(e) {
            e.preventDefault();

            if (selectedRating === 0) {
                alert('Please select a rating (1-5)');
                return;
            }

            const messageDiv = document.getElementById('feedbackMessage');
            messageDiv.className = 'p-3 rounded-xl text-sm font-semibold text-center bg-green-50 text-brand-success border border-green-200';
            messageDiv.textContent = `Thank you! Your ${selectedRating}-star rating has been submitted successfully.`;
            messageDiv.classList.remove('hidden');

            // Simulate storing in database (R-8)
            setTimeout(() => {
                window.location.href = 'booking_history.html';
            }, 2000);
        });
    </script>
</body>
</html>
