<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Fixora | Payment Receipt</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: { 
                            dark: '#0f172a', 
                            primary: '#0066ff', 
                            'primary-dark': '#0052cc',
                            action: '#4f46e5',
                            'action-light': '#6366f1',
                            accent: '#06b6d4',
                            success: '#10b981',
                            warning: '#f59e0b',
                            surface: '#f8fafc',
                            'surface-alt': '#f1f5f9'
                        }
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-brand-surface min-h-screen pb-10">
    <!-- Success Header -->
    <div class="bg-gradient-to-br from-brand-success to-green-600 p-8 text-center text-white">
        <div class="w-20 h-20 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4">
            <i class="fa-solid fa-check text-4xl"></i>
        </div>
        <h1 class="text-2xl font-extrabold mb-2">Payment Successful! (R-9.2)</h1>
        <p class="text-green-50">Transaction completed successfully</p>
    </div>

    <main class="p-6 -mt-6">
        <!-- Receipt Card -->
        <div class="bg-white rounded-[24px] p-6 shadow-xl mb-6 card-interactive">
            <div class="text-center mb-6 pb-6 border-b border-gray-100">
                <h2 class="text-lg font-bold text-brand-dark mb-2">Payment Receipt</h2>
                <p class="text-xs text-gray-500">Generated automatically after successful payment</p>
            </div>

            <!-- Transaction Details -->
            <div class="space-y-4 mb-6">
                <div class="flex justify-between items-center">
                    <span class="text-gray-600">Transaction ID</span>
                    <span class="font-bold text-brand-dark" id="transactionId">TXN1734567890</span>
                </div>
                <div class="flex justify-between items-center">
                    <span class="text-gray-600">Date & Time</span>
                    <span class="font-bold text-brand-dark" id="transactionDate">Dec 15, 2024 • 11:30 AM</span>
                </div>
                <div class="flex justify-between items-center">
                    <span class="text-gray-600">Payment Method</span>
                    <span class="font-bold text-brand-dark">Credit Card •••• 3456</span>
                </div>
                <div class="flex justify-between items-center">
                    <span class="text-gray-600">Service</span>
                    <span class="font-bold text-brand-dark">AC Repair Service</span>
                </div>
                <div class="flex justify-between items-center">
                    <span class="text-gray-600">Service Provider</span>
                    <span class="font-bold text-brand-dark">Mike Ross</span>
                </div>
                <div class="flex justify-between items-center pt-4 border-t border-gray-100">
                    <span class="text-lg font-bold text-brand-dark">Amount Paid</span>
                    <span class="text-2xl font-extrabold bg-gradient-to-r from-brand-success to-green-600 bg-clip-text text-transparent" id="amountPaid">$90.00</span>
                </div>
            </div>

            <!-- Success Badge -->
            <div class="bg-green-50 border border-green-200 rounded-xl p-4 flex items-center gap-3 mb-6">
                <i class="fa-solid fa-circle-check text-brand-success text-xl"></i>
                <div>
                    <p class="font-bold text-brand-success text-sm">Payment Confirmed</p>
                    <p class="text-xs text-gray-600">Transaction verified and recorded in database</p>
                </div>
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="space-y-3">
            <button onclick="downloadReceipt()" class="w-full bg-white border-2 border-brand-action text-brand-action py-4 rounded-xl font-bold shadow-md tap-effect hover-lift transition-all flex items-center justify-center gap-2">
                <i class="fa-solid fa-download"></i>
                Download Receipt (PDF)
            </button>

            <button onclick="shareReceipt()" class="w-full bg-white border-2 border-gray-200 text-gray-700 py-4 rounded-xl font-bold shadow-md tap-effect hover-lift transition-all flex items-center justify-center gap-2">
                <i class="fa-solid fa-share-alt"></i>
                Share Receipt
            </button>

            <a href="booking_history.html" class="block w-full bg-gradient-to-r from-brand-action via-brand-action-light to-brand-primary text-white py-4 rounded-xl font-bold shadow-lg shadow-brand-action/40 tap-effect hover-lift transition-all text-center">
                View Booking History
            </a>
        </div>

        <!-- Notification Info (R-9.2) -->
        <div class="mt-6 bg-blue-50 border border-blue-100 rounded-xl p-4">
            <p class="text-xs text-blue-800 font-medium flex items-start gap-2">
                <i class="fa-solid fa-bell mt-0.5"></i>
                <span>You will receive a confirmation email with receipt details. Payment has been processed and booking is confirmed.</span>
            </p>
        </div>

        <!-- Refund Policy (R-9.3) -->
        <div class="mt-6 bg-white rounded-xl p-4 shadow-md border border-gray-100">
            <h3 class="font-bold text-brand-dark mb-2 flex items-center gap-2">
                <i class="fa-solid fa-undo text-brand-action"></i>
                Cancellation & Refund Policy (R-9.3)
            </h3>
            <p class="text-xs text-gray-600 leading-relaxed">
                If you need to cancel this service, please contact support within 24 hours. Refunds are processed within 5-7 business days. 
                Admin can initiate refunds through the payment gateway using your Transaction ID.
            </p>
            <button onclick="requestRefund()" class="mt-3 text-sm text-red-600 font-bold hover:underline">
                Request Cancellation/Refund →
            </button>
        </div>
    </main>

    <script>
        // Get transaction details from URL
        const urlParams = new URLSearchParams(window.location.search);
        const txnId = urlParams.get('txn') || 'TXN' + Date.now();
        const amount = urlParams.get('amount') || '90.00';
        const status = urlParams.get('status') || 'success';

        // Update receipt with transaction details
        document.getElementById('transactionId').textContent = txnId;
        document.getElementById('amountPaid').textContent = '$' + amount;
        document.getElementById('transactionDate').textContent = new Date().toLocaleString('en-US', {
            month: 'short',
            day: 'numeric',
            year: 'numeric',
            hour: 'numeric',
            minute: '2-digit'
        });

        // Download Receipt (R-9.2)
        function downloadReceipt() {
            // In real app, this would generate a PDF
            alert('Receipt PDF download initiated. In production, this generates a PDF with all transaction details.');
            
            // Simulate PDF generation
            const receiptData = {
                transactionId: txnId,
                amount: amount,
                date: document.getElementById('transactionDate').textContent,
                service: 'AC Repair Service',
                provider: 'Mike Ross'
            };
            
            console.log('Receipt Data:', receiptData);
            // Actual PDF generation would happen here
        }

        // Share Receipt
        function shareReceipt() {
            if (navigator.share) {
                navigator.share({
                    title: 'Fixora Payment Receipt',
                    text: `Payment receipt for Transaction ${txnId}. Amount: $${amount}`,
                    url: window.location.href
                });
            } else {
                // Fallback: Copy to clipboard
                navigator.clipboard.writeText(window.location.href);
                alert('Receipt link copied to clipboard!');
            }
        }

        // Request Refund (R-9.3)
        function requestRefund() {
            const confirmed = confirm(`Request refund for Transaction ${txnId}?\n\nThis will notify the admin to process your refund.`);
            
            if (confirmed) {
                // In real app, this would send a refund request to backend
                alert('Refund request submitted. Admin will process your refund within 5-7 business days.\n\nRefund will be processed through payment gateway using Transaction ID: ' + txnId);
                
                // Simulate sending refund request to backend
                const refundRequest = {
                    transactionId: txnId,
                    amount: amount,
                    reason: 'Customer requested cancellation',
                    status: 'pending'
                };
                
                console.log('Refund Request:', refundRequest);
                // Actual API call would happen here
            }
        }

        // Show success notification on page load (R-9.2)
        window.addEventListener('load', function() {
            // Simulate notification delivery
            console.log('Notification sent: Payment confirmation with receipt details');
        });
    </script>
</body>
</html>
